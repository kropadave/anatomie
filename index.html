<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anatomick√Ω Kv√≠z - Hard Mode</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --danger-color: #c0392b;
            --bg-color: #ecf0f1;
            --card-bg: #ffffff;
            --hint-bg: #fff3cd;
            --hint-text: #856404;
            --info-bg: #d4edda;
            --info-text: #155724;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--primary-color);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 15px;
        }

        .container {
            background-color: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 800px;
            padding: 30px;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        header {
            margin-bottom: 20px;
            text-align: center;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: 8px;
            background-color: #dfe6e9;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--accent-color);
            width: 0%;
            transition: width 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        #question-area {
            min-height: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            text-align: center;
        }

        #question-text {
            font-size: 1.5em;
            font-weight: 700;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        /* Tlaƒç√≠tko N√°povƒõda */
        .hint-btn {
            background: none;
            border: 1px dashed var(--accent-color);
            color: var(--accent-color);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            margin-bottom: 15px;
            transition: all 0.2s;
        }
        
        .hint-btn:hover {
            background-color: #f0f8ff;
        }

        .hint-box {
            background-color: var(--hint-bg);
            color: var(--hint-text);
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.95em;
            border-left: 4px solid #ffc107;
            display: none;
        }

        /* Box s vysvƒõtlen√≠m */
        .explanation-box {
            background-color: var(--info-bg);
            color: var(--info-text);
            border-left: 5px solid var(--success-color);
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 1em;
            line-height: 1.5;
            text-align: left;
            width: 100%;
            box-sizing: border-box;
            display: none;
        }

        .explanation-box strong {
            display: block;
            margin-bottom: 5px;
            font-size: 1.1em;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 600px) {
            .options-grid { grid-template-columns: 1fr; }
            .container { padding: 15px; }
            #question-text { font-size: 1.2em; }
        }

        .option-card {
            background-color: white;
            border: 2px solid #bdc3c7;
            border-radius: 12px;
            padding: 20px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.2s, border-color 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 70px;
            user-select: none;
            font-weight: 500;
        }

        .option-card:hover:not(.disabled) {
            border-color: var(--accent-color);
            background-color: #f4faff;
            transform: translateY(-2px);
        }

        .option-card.correct {
            background-color: var(--success-color);
            color: white;
            border-color: var(--success-color);
        }

        .option-card.wrong {
            background-color: var(--danger-color);
            color: white;
            border-color: var(--danger-color);
            opacity: 0.6;
        }
        
        .option-card.disabled {
            cursor: default;
            pointer-events: none;
        }

        .next-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 15px;
            width: 100%;
            font-size: 1.1em;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 15px;
            font-weight: bold;
            display: none;
        }

        .next-btn:hover { background-color: #2980b9; }
        .hidden { display: none !important; }

        #end-screen { text-align: center; padding: 20px; }
        #final-score { font-size: 3em; color: var(--accent-color); margin: 20px 0; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div class="stats">
            <span id="question-counter">Ot√°zka 1</span>
            <span id="score-counter">Sk√≥re: 0</span>
        </div>
        <div class="progress-bar">
            <div id="progress-fill" class="progress-fill"></div>
        </div>
    </header>

    <div id="quiz-screen">
        <div id="question-area">
            <div id="question-text">Naƒç√≠t√°n√≠...</div>
            
            <button class="hint-btn" onclick="showHint()" id="hint-btn">
                üí° Kde to le≈æ√≠? (N√°povƒõda)
            </button>
            <div id="hint-box" class="hint-box"></div>
        </div>

        <div class="options-grid">
            <div class="option-card" onclick="selectOption(0)" id="opt-0">A</div>
            <div class="option-card" onclick="selectOption(1)" id="opt-1">B</div>
        </div>

        <div id="explanation-box" class="explanation-box"></div>
        <button class="next-btn" id="next-btn" onclick="nextQuestion()">Dal≈°√≠ ot√°zka ‚û°</button>
    </div>

    <div id="end-screen" class="hidden">
        <h2>Kv√≠z dokonƒçen!</h2>
        <p>Tv√© v√Ωsledn√© sk√≥re:</p>
        <div id="final-score">0 / 0</div>
        <button class="next-btn" style="display:block" onclick="restartQuiz()">Spustit znovu</button>
    </div>
</div>

<script>
    /*
       TYPY (t):
       1 = Roviny a smƒõry
       2 = Kosti a ƒç√°sti kost√≠
       3 = Klouby a vazy
       4 = Svaly
       5 = Nervy a c√©vy
       6 = Ostatn√≠ (bu≈àky, tk√°nƒõ)
    */
    const database = [
        // ROVINY A SMƒöRY (Typ 1)
        { t: 1, q: "Jak se naz√Ωv√° rovina, kter√° dƒõl√≠ tƒõlo na pravou a levou polovinu (zrcadlovƒõ)?", a: "Rovina medi√°nn√≠", h: "St≈ôed tƒõla.", e: "Jedin√° rovina dƒõl√≠c√≠ tƒõlo na symetrick√© poloviny." },
        { t: 1, q: "Jak se naz√Ωvaj√≠ roviny rovnobƒõ≈æn√© s rovinou medi√°nn√≠?", a: "Roviny sagit√°ln√≠", h: "Mimo st≈ôed, zep≈ôedu dozadu.", e: "Sagitta = ≈°√≠p." },
        { t: 1, q: "Jak√° rovina dƒõl√≠ tƒõlo na p≈ôedn√≠ a zadn√≠ ƒç√°st?", a: "Rovina front√°ln√≠", h: "Rovnobƒõ≈æn√° s ƒçelem.", e: "Frons = ƒçelo. Nƒõkdy zvan√° koron√°rn√≠." },
        { t: 1, q: "Jak√° rovina dƒõl√≠ tƒõlo na horn√≠ a doln√≠ ƒç√°st?", a: "Rovina transverz√°ln√≠", h: "Nap≈ô√≠ƒç tƒõlem.", e: "Vodorovn√° rovina." },
        { t: 1, q: "Co znamen√° smƒõr ‚Äûkrani√°ln√≠‚Äú?", a: "Smƒõrem k hlavƒõ (nahoru)", h: "Nahoru.", e: "Cranium = lebka." },
        { t: 1, q: "Co znamen√° smƒõr ‚Äûkaud√°ln√≠‚Äú?", a: "Smƒõrem k doln√≠mu konci (dol≈Ø)", h: "Dol≈Ø.", e: "Cauda = ocas." },
        { t: 1, q: "Co znamen√° smƒõr ‚Äûdist√°ln√≠‚Äú na konƒçetinƒõ?", a: "D√°le od trupu", h: "K prst≈Øm.", e: "Distantia = vzd√°lenost." },
        { t: 1, q: "Co znamen√° smƒõr ‚Äûproxim√°ln√≠‚Äú na konƒçetinƒõ?", a: "Bl√≠≈æe k trupu", h: "K rameni/kyƒçli.", e: "Proximus = nejbli≈æ≈°√≠." },
        { t: 1, q: "Jak se latinsky ≈ôekne ‚Äûvnit≈ôn√≠‚Äú (smƒõrem ke st≈ôedn√≠ rovinƒõ)?", a: "Medialis", h: "Ke st≈ôedu.", e: "Medium = st≈ôed." },
        { t: 1, q: "Jak se latinsky ≈ôekne ‚Äûzevn√≠‚Äú (smƒõrem od st≈ôedn√≠ roviny)?", a: "Lateralis", h: "Do boku.", e: "Latus = bok." },
        { t: 1, q: "Jak√Ω pohyb znamen√° ‚Äûflexe‚Äú?", a: "Ohyb", h: "Zmen≈°en√≠ √∫hlu.", e: "Nap≈ô. pokrƒçen√≠ lokte." },
        { t: 1, q: "Jak√Ω pohyb znamen√° ‚Äûextenze‚Äú?", a: "Nata≈æen√≠", h: "Zvƒõt≈°en√≠ √∫hlu.", e: "Nap≈ô. narovn√°n√≠ lokte." },
        { t: 1, q: "Jak√Ω pohyb znamen√° ‚Äûabdukce‚Äú?", a: "Upa≈æen√≠ (od tƒõla)", h: "Pohyb pryƒç.", e: "Ab = pryƒç." },
        { t: 1, q: "Jak√Ω pohyb znamen√° ‚Äûaddukce‚Äú?", a: "P≈ôipa≈æen√≠ (k tƒõlu)", h: "Pohyb k sobƒõ.", e: "Ad = k nƒõƒçemu." },
        { t: 1, q: "Co znamen√° poloha ‚Äûsupinace‚Äú p≈ôedlokt√≠?", a: "Dlanƒõ smƒõ≈ôuj√≠ dop≈ôedu/nahoru", h: "Jako kdy≈æ pros√≠≈°.", e: "Mal√≠kov√° hrana u tƒõla." },
        { t: 1, q: "Co znamen√° poloha ‚Äûpronace‚Äú p≈ôedlokt√≠?", a: "Dlanƒõ smƒõ≈ôuj√≠ dozadu/dol≈Ø", h: "Jako kdy≈æ hraje≈° na klav√≠r.", e: "Palcov√° hrana u tƒõla." },

        // KOSTI (Typ 2)
        { t: 2, q: "Jak se naz√Ωv√° vazivov√Ω obal kosti na povrchu?", a: "Okostice (periost)", h: "Povrch kosti.", e: "Bohatƒõ inervovan√° bl√°na." },
        { t: 2, q: "Co je to diaf√Ωza?", a: "Tƒõlo dlouh√© kosti (st≈ôed)", h: "Dlouh√° ƒç√°st.", e: "Trubkovit√° st≈ôedn√≠ ƒç√°st." },
        { t: 2, q: "Co je to epif√Ωza?", a: "Konec dlouh√© kosti", h: "Kloubn√≠ konec.", e: "Roz≈°√≠≈ôen√Ω konec kosti." },
        { t: 2, q: "Kolik krƒçn√≠ch obratl≈Ø m√° ƒçlovƒõk?", a: "7", h: "Krk.", e: "C1-C7." },
        { t: 2, q: "Jak se latinsky naz√Ωv√° prvn√≠ krƒçn√≠ obratel?", a: "Atlas", h: "Pod lebkou.", e: "Nosiƒç." },
        { t: 2, q: "Jak se latinsky naz√Ωv√° druh√Ω krƒçn√≠ obratel?", a: "Axis", h: "Pod Atlasem.", e: "ƒåepovec." },
        { t: 2, q: "Kolik je hrudn√≠ch obratl≈Ø?", a: "12", h: "Hrudn√≠k.", e: "Th1-Th12." },
        { t: 2, q: "Kolik je bedern√≠ch obratl≈Ø?", a: "5", h: "Bedra.", e: "L1-L5." },
        { t: 2, q: "Jak se naz√Ωv√° kost k≈ô√≠≈æov√°?", a: "Os sacrum", h: "V p√°nvi vzadu.", e: "Srostla z 5 obratl≈Ø." },
        { t: 2, q: "Kolik p√°r≈Ø ≈æeber m√° ƒçlovƒõk?", a: "12 p√°r≈Ø", h: "Hrudn√≠ ko≈°.", e: "Celkem 24 ≈æeber." },
        { t: 2, q: "Kter√° ≈æebra jsou ‚Äûprav√°‚Äú?", a: "1.‚Äì7. p√°r", h: "P≈ô√≠mo na sternum.", e: "Maj√≠ vlastn√≠ chrupavku na sternum." },
        { t: 2, q: "Kter√° ≈æebra jsou ‚Äûvoln√°‚Äú?", a: "11. a 12. p√°r", h: "Konec ve svalech.", e: "Nedosahuj√≠ ke kosti hrudn√≠." },
        { t: 2, q: "Co je to Manubrium?", a: "Rukoje≈• kosti hrudn√≠", h: "Horn√≠ ƒç√°st sterna.", e: "ƒå√°st sterna." },
        { t: 2, q: "Co je to Processus xiphoideus?", a: "Meƒçovit√Ω v√Ωbƒõ≈æek", h: "Doln√≠ konec sterna.", e: "Nejni≈æ≈°√≠ ƒç√°st hrudn√≠ kosti." },
        { t: 2, q: "Jak se naz√Ωv√° l√≠cn√≠ kost?", a: "Os zygomaticum", h: "Tv√°≈ô.", e: "Tvo≈ô√≠ l√≠cn√≠ oblouk." },
        { t: 2, q: "Jak se naz√Ωv√° kost ƒçeln√≠?", a: "Os frontale", h: "ƒåelo.", e: "Tvo≈ô√≠ ƒçelo a strop oƒçnice." },
        { t: 2, q: "Jak se naz√Ωv√° kost t√Ωln√≠?", a: "Os occipitale", h: "Zadn√≠ ƒç√°st hlavy.", e: "Je v n√≠ velk√Ω t√Ωln√≠ otvor." },
        { t: 2, q: "Co je to Clavicula?", a: "Kost kl√≠ƒçn√≠", h: "Pletenec HK.", e: "Esovovitƒõ prohnut√° kost." },
        { t: 2, q: "Co je to Scapula?", a: "Lopatka", h: "Z√°da naho≈ôe.", e: "Ploch√° troj√∫heln√≠kov√° kost." },
        { t: 2, q: "Co je to Humerus?", a: "Kost pa≈æn√≠", h: "Pa≈æe.", e: "Kloub√≠ se v rameni a lokti." },
        { t: 2, q: "Co je to Radius?", a: "Kost v≈ôetenn√≠", h: "P≈ôedlokt√≠ (palec).", e: "Na palcov√© stranƒõ." },
        { t: 2, q: "Co je to Ulna?", a: "Kost loketn√≠", h: "P≈ôedlokt√≠ (mal√≠k).", e: "Na mal√≠kov√© stranƒõ." },
        { t: 2, q: "Co je to Olecranon?", a: "Loketn√≠ v√Ωbƒõ≈æek", h: "≈†piƒçka lokte.", e: "Souƒç√°st ulny." },
        { t: 2, q: "Kter√° kost z√°pƒõst√≠ je nejƒçastƒõji zlomen√°?", a: "Os scaphoideum", h: "Z√°pƒõst√≠.", e: "Loƒèkovit√° kost." },
        { t: 2, q: "Co je to Femur?", a: "Kost stehenn√≠", h: "Stehno.", e: "Nejdel≈°√≠ kost v tƒõle." },
        { t: 2, q: "Co je to Tibia?", a: "Kost holenn√≠", h: "B√©rec (siln√°).", e: "Nosn√° kost b√©rce." },
        { t: 2, q: "Co je to Fibula?", a: "Kost l√Ωtkov√°", h: "B√©rec (tenk√°).", e: "Vnƒõj≈°√≠ kotn√≠k." },
        { t: 2, q: "Co je to Patella?", a: "ƒå√©≈°ka", h: "Koleno.", e: "Sezamsk√° kost v ≈°la≈°e." },
        { t: 2, q: "Co je to Calcaneus?", a: "Kost patn√≠", h: "Pata.", e: "Nejvƒõt≈°√≠ kost nohy." },
        { t: 2, q: "Co je to Talus?", a: "Kost hlezenn√≠", h: "Kotn√≠k.", e: "P≈ôen√°≈°√≠ v√°hu na nohu." },
        { t: 2, q: "Co je to Acetabulum?", a: "Jamka kyƒçeln√≠ho kloubu", h: "P√°nev.", e: "Miska na ocet." },
        { t: 2, q: "Co je to Crista iliaca?", a: "H≈ôeben kosti kyƒçeln√≠", h: "Bok p√°nve.", e: "Horn√≠ okraj lopaty." },
        
        // KLOUBY A VAZY (Typ 3)
        { t: 3, q: "Jak√Ω typ kloubu je ramenn√≠ kloub?", a: "Kulovit√Ω voln√Ω", h: "Rameno.", e: "Nejpohyblivƒõj≈°√≠ kloub." },
        { t: 3, q: "Jak√Ω typ kloubu je kyƒçeln√≠ kloub?", a: "Kulovit√Ω omezen√Ω", h: "Kyƒçel.", e: "Hlubok√° jamka omezuje rozsah." },
        { t: 3, q: "Co je to symf√Ωza?", a: "Spona stydk√°", h: "Spojen√≠ p√°nve vp≈ôedu.", e: "Chrupavƒçit√© spojen√≠." },
        { t: 3, q: "Co jsou menisky?", a: "Chrupavƒçit√© destiƒçky v koleni", h: "Koleno.", e: "Vyrovn√°vaj√≠ zak≈ôiven√≠ ploch." },
        { t: 3, q: "Kter√Ω vaz je v koleni nejƒçastƒõji p≈ôetr≈æen√Ω?", a: "P≈ôedn√≠ zk≈ô√≠≈æen√Ω vaz (LCA)", h: "Koleno uvnit≈ô.", e: "Zaji≈°≈•uje p≈ôedn√≠ stabilitu." },
        { t: 3, q: "Co je to sutura?", a: "Lebeƒçn√≠ ≈°ev", h: "Lebka.", e: "Pevn√© vazivov√© spojen√≠ kost√≠ lebky." },
        { t: 3, q: "Co je to fontanela?", a: "Vazivov√Ω lup√≠nek u novorozenc≈Ø", h: "Lebka d√≠tƒõte.", e: "M√≠sto kde se kosti je≈°tƒõ nespojily." },
        
        // SVALY (Typ 4)
        { t: 4, q: "Jak se jmenuje nej≈°ir≈°√≠ sval zad?", a: "M. latissimus dorsi", h: "Z√°da.", e: "Plaveck√Ω sval." },
        { t: 4, q: "Jak se jmenuje k√°pov√Ω sval?", a: "M. trapezius", h: "≈†√≠je a horn√≠ z√°da.", e: "Zdvih√° ramena." },
        { t: 4, q: "Jak se jmenuje velk√Ω prsn√≠ sval?", a: "M. pectoralis major", h: "Hrudn√≠k.", e: "Dƒõl√° kliky." },
        { t: 4, q: "Kter√Ω sval tvo≈ô√≠ ‚Äûpek√°ƒç buchet‚Äú?", a: "M. rectus abdominis", h: "B≈ôicho.", e: "P≈ô√≠m√Ω sval b≈ôi≈°n√≠." },
        { t: 4, q: "Co je to br√°nice (diaphragma)?", a: "Hlavn√≠ n√°dechov√Ω sval", h: "Mezi hrudn√≠kem a b≈ôichem.", e: "Oddƒõluje dutiny." },
        { t: 4, q: "Jak se jmenuje sval na rameni (injekce)?", a: "M. deltoideus", h: "Rameno.", e: "Sval deltov√Ω." },
        { t: 4, q: "Co je to Biceps brachii?", a: "Dvojhlav√Ω sval pa≈æn√≠", h: "Pa≈æe vp≈ôedu.", e: "Oh√Ωb√° loket a supinuje." },
        { t: 4, q: "Co je to Triceps brachii?", a: "Trojhlav√Ω sval pa≈æn√≠", h: "Pa≈æe vzadu.", e: "Natahuje loket." },
        { t: 4, q: "Jak se jmenuje ƒçty≈ôhlav√Ω sval stehenn√≠?", a: "M. quadriceps femoris", h: "Stehno vp≈ôedu.", e: "Natahuje koleno." },
        { t: 4, q: "Kde je Achillova ≈°lacha?", a: "Na patƒõ", h: "Doln√≠ ƒç√°st l√Ωtka.", e: "√öpon tricepsu surae." },
        { t: 4, q: "Jak√Ω sval dƒõl√° ‚Äûboxersk√Ω √∫der‚Äú?", a: "M. serratus anterior", h: "Bok hrudn√≠ku.", e: "Pilovit√Ω sval." },
        { t: 4, q: "Kter√Ω sval se pou≈æ√≠v√° pro ≈æv√Ωk√°n√≠?", a: "M. masseter", h: "Tv√°≈ô.", e: "≈Ωv√Ωkac√≠ sval." },
        { t: 4, q: "Co je to M. sternocleidomastoideus?", a: "K√Ωvaƒç hlavy", h: "Krk.", e: "V√Ωrazn√Ω ≈°ikm√Ω sval na krku." },
        { t: 4, q: "Kde je M. gluteus maximus?", a: "H√Ω≈ædƒõ", h: "Zadek.", e: "Velk√Ω sval h√Ω≈æƒèov√Ω." },
        
        // NERVY, C√âVY, OSTATN√ç (Typ 5 a 6)
        { t: 5, q: "Co prob√≠h√° v carpaln√≠m tunelu?", a: "Nervus medianus a ≈°lachy", h: "Z√°pƒõst√≠.", e: "Utlaƒçen√≠ zp≈Øsobuje brnƒõn√≠ prst≈Ø." },
        { t: 5, q: "Kter√Ω nerv se naz√Ωv√° ‚Äûbr≈àavka‚Äú?", a: "Nervus ulnaris", h: "Loket.", e: "Prob√≠h√° za epikondylem humeru." },
        { t: 5, q: "Kter√Ω nerv inervuje br√°nici?", a: "Nervus phrenicus", h: "Z krƒçn√≠ m√≠chy.", e: "C3-C5." },
        { t: 6, q: "Kde se tvo≈ô√≠ krev?", a: "ƒåerven√° kostn√≠ d≈ôe≈à", h: "Uvnit≈ô kost√≠.", e: "Hlavnƒõ ploch√© kosti." },
        { t: 6, q: "Co jsou osteoklasty?", a: "Bu≈àky odbour√°vaj√≠c√≠ kost", h: "V kosti.", e: "Niƒç√≠ kostn√≠ tk√°≈à." },
        { t: 6, q: "Co jsou osteoblasty?", a: "Bu≈àky tvo≈ô√≠c√≠ kost", h: "V kosti.", e: "Stav√≠ kostn√≠ tk√°≈à." },
        { t: 6, q: "Co je to Havers≈Øv syst√©m (osteon)?", a: "Z√°kladn√≠ jednotka kosti", h: "Mikroskopick√° struktura.", e: "Soust≈ôedn√© lamely." }
    ];

    let questions = [];
    let currentQuestionIndex = 0;
    let score = 0;
    let canClick = true;

    function init() {
        questions = [...database];
        shuffleArray(questions);
        currentQuestionIndex = 0;
        score = 0;
        canClick = true;
        
        updateStats();
        showQuestion();
        
        document.getElementById('end-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        document.getElementById('next-btn').style.display = 'none';
    }

    // CHYTR√ù V√ùBƒöR ≈†PATN√â ODPOVƒöDI
    function getWrongAnswer(currentQuestion) {
        // Filtrujeme datab√°zi, abychom na≈°li ot√°zky STEJN√âHO TYPU (t)
        // ale s jinou odpovƒõd√≠ (a)
        const sameTypeQuestions = database.filter(item => 
            item.t === currentQuestion.t && item.a !== currentQuestion.a
        );

        if (sameTypeQuestions.length > 0) {
            // Pokud existuj√≠ ot√°zky stejn√©ho typu, vybereme n√°hodnou z nich
            const randomItem = sameTypeQuestions[Math.floor(Math.random() * sameTypeQuestions.length)];
            return randomItem.a;
        } else {
            // Fallback: Pokud v kategorii nen√≠ dost ot√°zek (nepravdƒõpodobn√©), vezmeme n√°hodnou z cel√© DB
            let fallback;
            do {
                fallback = database[Math.floor(Math.random() * database.length)].a;
            } while (fallback === currentQuestion.a);
            return fallback;
        }
    }

    function showQuestion() {
        // Reset UI
        document.getElementById('explanation-box').style.display = 'none';
        document.getElementById('hint-box').style.display = 'none';
        document.getElementById('hint-btn').style.display = 'inline-block';
        document.getElementById('next-btn').style.display = 'none';
        
        const qData = questions[currentQuestionIndex];
        document.getElementById('question-text').textContent = qData.q;
        
        document.getElementById('hint-box').textContent = qData.h;
        document.getElementById('explanation-box').innerHTML = `
            <strong>Vysvƒõtlen√≠:</strong> ${qData.e}
        `;

        // Z√≠sk√°n√≠ spr√°vn√© a "chytr√©" ≈°patn√© odpovƒõdi
        const correctAnswer = qData.a;
        const wrongAnswer = getWrongAnswer(qData);

        const options = [
            { text: correctAnswer, isCorrect: true },
            { text: wrongAnswer, isCorrect: false }
        ];
        shuffleArray(options);

        const opt0 = document.getElementById('opt-0');
        const opt1 = document.getElementById('opt-1');

        setupOption(opt0, options[0]);
        setupOption(opt1, options[1]);

        canClick = true;
        updateStats();
    }
    
    function setupOption(element, data) {
        element.textContent = data.text;
        element.className = 'option-card';
        element.classList.remove('disabled');
        element.dataset.correct = data.isCorrect;
    }

    function showHint() {
        document.getElementById('hint-box').style.display = 'block';
        document.getElementById('hint-btn').style.display = 'none';
    }

    function selectOption(optionIndex) {
        if (!canClick) return;
        canClick = false;

        const selectedElement = document.getElementById(`opt-${optionIndex}`);
        const isCorrect = selectedElement.dataset.correct === 'true';

        if (isCorrect) {
            selectedElement.classList.add('correct');
            score++;
        } else {
            selectedElement.classList.add('wrong');
            const otherIndex = optionIndex === 0 ? 1 : 0;
            const otherElement = document.getElementById(`opt-${otherIndex}`);
            if (otherElement.dataset.correct === 'true') {
                otherElement.classList.add('correct');
            }
        }
        
        document.getElementById('opt-0').classList.add('disabled');
        document.getElementById('opt-1').classList.add('disabled');

        document.getElementById('explanation-box').style.display = 'block';
        document.getElementById('next-btn').style.display = 'block';
        
        document.getElementById('explanation-box').scrollIntoView({ behavior: 'smooth', block: 'nearest' });

        const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
        document.getElementById('progress-fill').style.width = `${progress}%`;
    }

    function nextQuestion() {
        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
            showQuestion();
        } else {
            endQuiz();
        }
    }

    function updateStats() {
        document.getElementById('question-counter').textContent = `Ot√°zka ${currentQuestionIndex + 1} / ${questions.length}`;
        document.getElementById('score-counter').textContent = `Sk√≥re: ${score}`;
    }

    function endQuiz() {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('end-screen').classList.remove('hidden');
        document.getElementById('final-score').textContent = `${score} / ${questions.length}`;
    }

    function restartQuiz() {
        init();
        document.getElementById('progress-fill').style.width = '0%';
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    init();

</script>
</body>
</html>